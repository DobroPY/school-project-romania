import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import { deleteStudent, deleteTeacher } from "../../apis/delete";

const Delete = (props) => {
  const navigate = useNavigate();
  

  const [show, setShow] = useState(false);
  const showModal = () => {
    setShow(!show);
  };

  const deleteUser = ()=>{
    const id = props.id;
    const user =props.user;

    console.log(user)
    console.log(id)

    if(user == "teacher"){
      deleteTeacher(id);
      console.log("ok");
      
    }
    else if (user == "student"){
      deleteStudent(id);
      console.log(id);
    }


    showModal();
  }
  return (
    <section>
         <p onClick={showModal} className="flex items-center ml-2 text-[#FF3E13] cursor-pointer">
              <svg
                width="18"
                height="18"
                viewBox="0 0 18 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15.1875 3.375H12.375V2.8125C12.375 2.36495 12.1972 1.93572 11.8807 1.61926C11.5643 1.30279 11.1351 1.125 10.6875 1.125H7.3125C6.86495 1.125 6.43572 1.30279 6.11926 1.61926C5.80279 1.93572 5.625 2.36495 5.625 2.8125V3.375H2.8125C2.66332 3.375 2.52024 3.43426 2.41475 3.53975C2.30926 3.64524 2.25 3.78832 2.25 3.9375C2.25 4.08668 2.30926 4.22976 2.41475 4.33525C2.52024 4.44074 2.66332 4.5 2.8125 4.5H3.375V14.625C3.375 14.9234 3.49353 15.2095 3.7045 15.4205C3.91548 15.6315 4.20163 15.75 4.5 15.75H13.5C13.7984 15.75 14.0845 15.6315 14.2955 15.4205C14.5065 15.2095 14.625 14.9234 14.625 14.625V4.5H15.1875C15.3367 4.5 15.4798 4.44074 15.5852 4.33525C15.6907 4.22976 15.75 4.08668 15.75 3.9375C15.75 3.78832 15.6907 3.64524 15.5852 3.53975C15.4798 3.43426 15.3367 3.375 15.1875 3.375ZM6.75 2.8125C6.75 2.66332 6.80926 2.52024 6.91475 2.41475C7.02024 2.30926 7.16332 2.25 7.3125 2.25H10.6875C10.8367 2.25 10.9798 2.30926 11.0852 2.41475C11.1907 2.52024 11.25 2.66332 11.25 2.8125V3.375H6.75V2.8125ZM13.5 14.625H4.5V4.5H13.5V14.625ZM7.875 7.3125V11.8125C7.875 11.9617 7.81574 12.1048 7.71025 12.2102C7.60476 12.3157 7.46168 12.375 7.3125 12.375C7.16332 12.375 7.02024 12.3157 6.91475 12.2102C6.80926 12.1048 6.75 11.9617 6.75 11.8125V7.3125C6.75 7.16332 6.80926 7.02024 6.91475 6.91475C7.02024 6.80926 7.16332 6.75 7.3125 6.75C7.46168 6.75 7.60476 6.80926 7.71025 6.91475C7.81574 7.02024 7.875 7.16332 7.875 7.3125ZM11.25 7.3125V11.8125C11.25 11.9617 11.1907 12.1048 11.0852 12.2102C10.9798 12.3157 10.8367 12.375 10.6875 12.375C10.5383 12.375 10.3952 12.3157 10.2898 12.2102C10.1843 12.1048 10.125 11.9617 10.125 11.8125V7.3125C10.125 7.16332 10.1843 7.02024 10.2898 6.91475C10.3952 6.80926 10.5383 6.75 10.6875 6.75C10.8367 6.75 10.9798 6.80926 11.0852 6.91475C11.1907 7.02024 11.25 7.16332 11.25 7.3125Z"
                  fill="#FF3E13"
                />
              </svg>
              Delete Profile
            </p>
      {show ? (
        <div
          aria-hidden="true"
          className=" bg-white fixed top-[20%]  right-0 left-0  m-auto w-[25%] max-w-[25%] h-fit max-h-fit border p-2 border-slate-400 rounded-xl shadow-2xl "
        >
          <div className="top text-center flex justify-center">
            <svg
              width="56"
              height="56"
              viewBox="0 0 56 56"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect x="4" y="4" width="48" height="48" rx="24" fill="#FEE4E2" />
              <rect
                x="4"
                y="4"
                width="48"
                height="48"
                rx="24"
                stroke="#FEF3F2"
                stroke-width="8"
              />
              <path
                d="M36.4473 20.0278H32.6973V19.2778C32.6973 18.6811 32.4602 18.1088 32.0383 17.6868C31.6163 17.2649 31.044 17.0278 30.4473 17.0278H25.9473C25.3505 17.0278 24.7782 17.2649 24.3563 17.6868C23.9343 18.1088 23.6973 18.6811 23.6973 19.2778V20.0278H19.9473C19.7484 20.0278 19.5576 20.1068 19.4169 20.2475C19.2763 20.3882 19.1973 20.5789 19.1973 20.7778C19.1973 20.9767 19.2763 21.1675 19.4169 21.3082C19.5576 21.4488 19.7484 21.5278 19.9473 21.5278H20.6973V35.0278C20.6973 35.4257 20.8553 35.8072 21.1366 36.0885C21.4179 36.3698 21.7994 36.5278 22.1973 36.5278H34.1973C34.5951 36.5278 34.9766 36.3698 35.2579 36.0885C35.5392 35.8072 35.6973 35.4257 35.6973 35.0278V21.5278H36.4473C36.6462 21.5278 36.8369 21.4488 36.9776 21.3082C37.1182 21.1675 37.1973 20.9767 37.1973 20.7778C37.1973 20.5789 37.1182 20.3882 36.9776 20.2475C36.8369 20.1068 36.6462 20.0278 36.4473 20.0278ZM25.1973 19.2778C25.1973 19.0789 25.2763 18.8882 25.4169 18.7475C25.5576 18.6068 25.7484 18.5278 25.9473 18.5278H30.4473C30.6462 18.5278 30.8369 18.6068 30.9776 18.7475C31.1182 18.8882 31.1973 19.0789 31.1973 19.2778V20.0278H25.1973V19.2778ZM34.1973 35.0278H22.1973V21.5278H34.1973V35.0278ZM26.6973 25.2778V31.2778C26.6973 31.4767 26.6182 31.6675 26.4776 31.8082C26.3369 31.9488 26.1462 32.0278 25.9473 32.0278C25.7484 32.0278 25.5576 31.9488 25.4169 31.8082C25.2763 31.6675 25.1973 31.4767 25.1973 31.2778V25.2778C25.1973 25.0789 25.2763 24.8882 25.4169 24.7475C25.5576 24.6068 25.7484 24.5278 25.9473 24.5278C26.1462 24.5278 26.3369 24.6068 26.4776 24.7475C26.6182 24.8882 26.6973 25.0789 26.6973 25.2778ZM31.1973 25.2778V31.2778C31.1973 31.4767 31.1182 31.6675 30.9776 31.8082C30.8369 31.9488 30.6462 32.0278 30.4473 32.0278C30.2484 32.0278 30.0576 31.9488 29.9169 31.8082C29.7763 31.6675 29.6973 31.4767 29.6973 31.2778V25.2778C29.6973 25.0789 29.7763 24.8882 29.9169 24.7475C30.0576 24.6068 30.2484 24.5278 30.4473 24.5278C30.6462 24.5278 30.8369 24.6068 30.9776 24.7475C31.1182 24.8882 31.1973 25.0789 31.1973 25.2778Z"
                fill="#FF3E13"
              />
            </svg>
          </div>
          <div className="content text-center">
            <p className="font-bold text-xl mt-4">Delete {props.name} profile</p>
            <p className="px-6 pb-10 mt-2 font-normal">
              Are you sure you want to delete this profile? This action cannot
              be undone.
            </p>
          </div>
          <div className="footer flex justify-center">
            <button
              className="p-2 mb-4 w-[48%]  font-bold border border-slate-300 rounded-xl"
              onClick={showModal}
            >
              Close
            </button>
            <button
              className="p-2 mb-4 w-[48%] ml-[2%] bg-[#FF3E13] text-white font-bold border border-slate-300 rounded-xl"
              onClick={deleteUser}
            >
              Delete
            </button>
          </div>
        </div>
      ) : null}
    </section>
  );
};

export default Delete;
